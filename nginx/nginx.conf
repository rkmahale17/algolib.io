user  nginx;
worker_processes  auto;
error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events { worker_connections 1024; }

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;
  keepalive_timeout 65;

  # Brotli (serve precompressed .br if present)
  brotli on;
  brotli_comp_level 6;
  brotli_static on;
  brotli_types
      text/plain text/css text/javascript application/javascript
      application/json application/xml text/xml image/svg+xml
      application/xml+rss application/wasm;

  gzip off; # prefer brotli

  # (Optional) helps catch any http links left in HTML, but donâ€™t rely on it:
  # add_header Content-Security-Policy "block-all-mixed-content";

  include /etc/nginx/conf.d/*.conf;
}
